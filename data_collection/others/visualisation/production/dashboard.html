<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ScoreCard | Dashboard</title>

  <!-- Bootstrap -->
  <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <!-- NProgress -->
  <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
  <!-- jQuery custom content scroller -->
  <link href="../vendors/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <!-- Custom Theme Style -->
  <link href="../build/css/custom.min.css" rel="stylesheet">
  <!-- Animated graph donought one moving -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
        font-family: 'Roboto', sans-serif;
        background-color: #f4f6f8;
        color: #333;
    }
   
    .chart-container {
        height: 300px;
        margin-bottom: 20px;
    }
    .main-content {
        margin-left: 0px; /* Adjust based on sidebar width */
        padding: 20px;
    }
    .card {
        border-radius: 10px;
        overflow: hidden;
        transition: transform 0.3s;
    }
    /* Adjust card height as needed */
    .chart-container {
        height: 200px; /* Adjust this value as needed */
        margin-bottom: 20px;
    }
    .card:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    .card-title {
        background-color: #007bff;
        color: white;
        margin-top: 0;
        padding: 10px;
        border-radius: 10px 10px 0 0;
        text-align: center;
    }
    /* ----budge style------*/
    .badge-container {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .badge-image {
        width: 100px; /* Adjust the size as needed */
        height: auto;
        border-radius: 50%; /* Makes it circular if the image is square */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        margin-top: -10px; /* Adjust position above title */
    }
    /* //----budge style------*/

</style>
</head>

<body class="nav-md">
<div class="container body">
  <div class="main_container">
    <div class="col-md-3 left_col menu_fixed">
      <div class="left_col scroll-view">
        <div class="navbar nav_title" style="border: 0;">
          <a href="dashboard.php" class="site_title"><i class="fa fa-trophy"></i> <span>ScoreCard</span></a>
        </div>

        <div class="clearfix"></div>

        <!-- menu profile quick info -->
        <div class="profile clearfix">
          <div class="profile_pic">
            <img src="images/user.png" alt="..." class="img-circle profile_img">
          </div>
          <div class="profile_info">
            <span>Welcome,</span>
            <h2>HRM</h2>
          </div>
        </div>
        <!-- /menu profile quick info -->

        <br />

        <!-- sidebar menu -->
        <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
          <div class="menu_section">
            <h3>Score Management</h3>
            <ul class="nav side-menu">
              <li><a><i class="fa fa-dashboard"></i> Dashboard <span class="fa fa-chevron-down"></span></a>
                <ul class="nav child_menu">
                  <li><a href="dashboard.php">Main Dashboard</a></li>
                  <li><a href="analytics.html">Analytics</a></li>
                </ul>
              </li>
              <li><a><i class="fa fa-upload"></i> Upload-Data <span class="fa fa-chevron-down"></span></a>
                <ul class="nav child_menu">
                  <li><a href="../../csv/csv_receiver/upload.php">Upload Csv</a></li>
                  <li><a href="../../csv/csv_receiver/modify/column.php">Edit Csv csv_receiver</a></li>
                  <li><a href="../../csv/csv_receiver/upload.php">Check current Criteria</a></li>
                  <li><a href="../../csv/csv_receiver/criteria/criteria_upload.php">Edit Csv csv_receiver</a></li>
                </ul>
              </li>
              <li><a><i class="fa fa-bar-chart"></i> Reports <span class="fa fa-chevron-down"></span></a>
                <ul class="nav child_menu">
                  <li><a href="monthly_reports.html">Monthly Reports</a></li>
                  <li><a href="annual_reports.html">Annual Reports</a></li>
                </ul>
              </li>
              <li><a><i class="fa fa-users"></i> Team Performance <span class="fa fa-chevron-down"></span></a>
                <ul class="nav child_menu">
                  <li><a href="team_overview.html">Overview</a></li>
                  <li><a href="individual_performance.html">Individual Scores</a></li>
                </ul>
              </li>
              <li><a><i class="fa fa-trophy"></i> Achievements <span class="fa fa-chevron-down"></span></a>
                <ul class="nav child_menu">
                  <li><a href="grants_graph.html">Goals</a></li>
                  <li><a href="enhance.php">Milestones</a></li>
                </ul>
              </li>
              <!-- /AOB EXAMPLE DIAGRAMS -->
              <li><a><i class="fa fa-bar-chart-o"></i> Data Presentation <span class="fa fa-chevron-down"></span></a>
                <ul class="nav child_menu">
                  <li><a href="chartjs.html">Chart JS</a></li>
                  <li><a href="chartjs2.html">Chart JS2</a></li>
                  <li><a href="morisjs.html">Moris JS</a></li>
                  <li><a href="echarts.html">ECharts</a></li>
                  <li><a href="other_charts.html">Other Charts</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
        <!-- /sidebar menu -->

        <!-- sidebar footer buttons -->
        <div class="sidebar-footer hidden-small">
          <a data-toggle="tooltip" data-placement="top" title="Settings">
            <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
          </a>
          <a data-toggle="tooltip" data-placement="top" title="FullScreen">
            <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
          </a>
          <a data-toggle="tooltip" data-placement="top" title="Lock">
            <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
          </a>
          <a data-toggle="tooltip" data-placement="top" title="Logout" href="login.html">
            <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
          </a>
        </div>
        <!-- /sidebar footer buttons -->
      </div>
    </div>

    <!-- top navigation -->
    <div class="top_nav">
      <div class="nav_menu">
        <div class="nav toggle">
          <a id="menu_toggle"><i class="fa fa-bars"></i></a>
        </div>
        <nav class="nav navbar-nav">
          <ul class=" navbar-right">
            <li class="nav-item dropdown open" style="padding-left: 15px;">
              <a href="javascript:;" class="user-profile dropdown-toggle" aria-haspopup="true" id="navbarDropdown" data-toggle="dropdown" aria-expanded="false">
                <img src="images/user.png" alt="">Isa.k
              </a>
              <div class="dropdown-menu dropdown-usermenu pull-right" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="javascript:;"> Profile</a>
                <a class="dropdown-item" href="javascript:;"> Settings</a>
                <a class="dropdown-item" href="javascript:;">Help</a>
                <a class="dropdown-item" href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a>
              </div>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <!-- /top navigation -->

    <!-- page content -->
    <div class="right_col" role="main">
      <div class="page-title">
        
      </div>
      <!-- Add your content here -->

      <div class="main-content">
        <!-- Badge Image -->
        <div class="badge-container text-center mb-3">
            <img src="images/mustlogo.png" alt="Badge" class="badge-image">
        </div>

        <h1 class="text-center my-4">Expert Score - Dashboard</h1>

        <!-- Top Tiles Start -->
        <div class="container mt-4">
            <div class="row">
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <span class="count_top"><i class="fa fa-user"></i> Total Employees</span>
                            <div class="count">2500</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <span class="count_top"><i class="fa fa-clock-o"></i> Average Time</span>
                            <div class="count">123.50</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <span class="count_top"><i class="fa fa-user"></i> Total Males</span>
                            <div class="count">2,500</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <span class="count_top"><i class="fa fa-user"></i> Total Females</span>
                            <div class="count">4,567</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Top Tiles End -->

        <br>

       <!-- Graphs Section Start -->
      <div class="container mt-4">
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <h2 class="card-title">Community Service Points</h2>
                    <div class="chart-container">
                        <canvas id="communityServiceChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <h2 class="card-title">Professional Bodies Points</h2>
                    <div class="chart-container">
                        <canvas id="professionalBodiesChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <h2 class="card-title">Staff Services</h2>
                    <div class="chart-container">
                        <canvas id="staffServicesChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-4">
                <div class="card">
                    <h2 class="card-title">Grants</h2>
                    <div class="chart-container">
                        <canvas id="grantsGauge"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="grantsChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <h2 class="card-title">Roles and Max Points</h2>
                    <div class="chart-container">
                        <canvas id="rolesChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
      </div>
      <!-- Graphs Section End -->


      <!-- footer content -->
      <footer>
        <div class="pull-right">
          ScoreCard Application by Group 10
        </div>
        <div class="clearfix"></div>
      </footer>
      <!-- /footer content -->
    </div>
  </div>

<!-- jQuery -->
<script src="../vendors/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="../vendors/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<!-- FastClick -->
<script src="../vendors/fastclick/lib/fastclick.js"></script>
<!-- NProgress -->
<script src="../vendors/nprogress/nprogress.js"></script>
<!-- jQuery custom content scroller -->
<script src="../vendors/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>
<!-- Custom Theme Scripts -->
<script src="../build/js/custom.min.js"></script>
    <script src="../vendors/Chart.js/dist/Chart.min.js"></script>
    <script>
      Promise.all([
          fetch('json_data/community_service_data.json').then(res => res.json()),
          fetch('json_data/grants_data.json').then(res => res.json()),
          fetch('json_data/service_data.json').then(res => res.json()),
          fetch('json_data/professional_bodies_data.json').then(res => res.json()),
          fetch('json_data/roles_data.json').then(res => res.json()) // Added missing comma here
      ])
      .then(([communityServiceData, grantsData, serviceData, professionalBodiesData, rolesData]) => { // Added rolesData to the destructured array
          
          // --- Community Service Points Chart Start ---
          const communityServiceCtx = document.getElementById('communityServiceChart').getContext('2d');
          new Chart(communityServiceCtx, {
              type: 'line',
              data: {
                  labels: communityServiceData.map(item => item.staff_name),
                  datasets: [{
                      label: 'Points',
                      data: communityServiceData.map(item => parseInt(item.points)),
                      backgroundColor: 'rgba(75, 192, 192, 0.6)',
                  }]
              },
              // --- Adding legend display option ---
              options: {
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    }
                }
            }
          });
          // --- Community Service Points Chart End ---
  
          // --- Grants Chart Start ---
          const grantsCtx = document.getElementById('grantsChart').getContext('2d');
          new Chart(grantsCtx, {
              type: 'bar',
              data: {
                  labels: grantsData.map(item => item.staff_name),
                  datasets: [{
                      label: 'Grant Amount (UGX)',
                      data: grantsData.map(item => item.grant_amount),
                      backgroundColor: 'rgba(75, 192, 192, 0.6)',
                  }]
              }
          });
          // --- Grants Chart End ---
  
          // --- Staff Services Chart Start ---
          const serviceCtx = document.getElementById('staffServicesChart').getContext('2d');
          new Chart(serviceCtx, {
              type: 'line',
              data: {
                  labels: serviceData.map(item => item.staff_name),
                  datasets: [{
                      label: 'Service Points',
                      data: serviceData.map(item => parseInt(item.points)),
                      backgroundColor: 'rgba(255, 99, 132, 0.6)', // Change this to a single color
                  }]
              }
          });
          // --- Staff Services Chart End ---
  
          // --- Grants Gauge Start ---
          const gaugeCtx = document.getElementById('grantsGauge').getContext('2d');
          const totalGrants = grantsData.reduce((total, item) => total + item.grant_amount, 0);
          const goal = 1000000000; // Goal for grants (1 billion)
          new Chart(gaugeCtx, {
              type: 'doughnut',
              data: {
                  labels: ['Current Total', 'Remaining'],
                  datasets: [{
                      data: [totalGrants, goal - totalGrants],
                      backgroundColor: ['#4caf50', '#e0e0e0'],
                  }]
              }
          });
          // --- Grants Gauge End ---
  
          // --- Professional Bodies Points Chart Start ---
          const professionalBodiesCtx = document.getElementById('professionalBodiesChart').getContext('2d');
          new Chart(professionalBodiesCtx, {
              type: 'bar',
              data: {
                  labels: professionalBodiesData.map(item => item.staff_name),
                  datasets: [{
                      label: 'Points',
                      data: professionalBodiesData.map(item => parseInt(item.points)),
                      backgroundColor: 'rgba(255, 159, 64, 0.6)',
                  }]
              }
          });
          // --- Professional Bodies Points Chart End ---
  
          // --- Roles Chart Start ---
          const rolesCtx = document.getElementById('rolesChart').getContext('2d');
          new Chart(rolesCtx, {
              type: 'bar',
              data: {
                  labels: rolesData.map(item => item.role_name),
                  datasets: [{
                      label: 'Max Points',
                      data: rolesData.map(item => parseInt(item.max_points)),
                      backgroundColor: 'rgba(153, 102, 255, 0.6)',
                  }]
              }
          });
          // --- Roles Chart End ---
      }) 
      .catch(error => console.error('Error fetching JSON data:', error));
  </script>
  
</body>
</html>
